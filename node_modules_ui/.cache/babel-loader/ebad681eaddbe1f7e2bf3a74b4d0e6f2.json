{"ast":null,"code":"import _classCallCheck from \"/home/architgupta923/data-digital-twin/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/architgupta923/data-digital-twin/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/architgupta923/data-digital-twin/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/architgupta923/data-digital-twin/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/architgupta923/data-digital-twin/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/architgupta923/data-digital-twin/ui/src/App.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Progress } from 'reactstrap';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\nimport Form from 'react-bootstrap/Form';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { ExcelRenderer } from 'react-excel-renderer';\nimport { Jumbotron, Col, Container, Card } from 'reactstrap';\nimport { Box } from '@material-ui/core';\nimport MUIDataTable from 'mui-datatables';\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.componentDidMount = function () {\n      _this.callAPI();\n    };\n\n    _this.callAPI = function () {\n      axios.get('/').then(function (response) {\n        var data = response.data;\n\n        _this.setState({\n          posts: data\n        });\n\n        console.log('Data has been received!');\n      }).catch(function () {\n        alert('Error retrieving data!');\n      });\n    };\n\n    _this.renderFile = function (fileObj) {\n      ExcelRenderer(fileObj, function (err, resp) {\n        if (err) {\n          console.log(err);\n        } else {\n          _this.setState({\n            dataLoaded: true,\n            cols: resp.cols,\n            rows: resp.rows\n          });\n        }\n      });\n    };\n\n    _this.checkMimeType = function (event) {\n      var files = event.target.files;\n      var err = [];\n      var types = ['application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/vnd.ms-excel', 'text/csv'];\n\n      for (var x = 0; x < files.length; x++) {\n        if (types.every(function (type) {\n          return files[x].type !== type;\n        })) {\n          err[x] = files[x].type + ' is not a supported format\\n';\n        }\n      }\n\n      ;\n\n      for (var z = 0; z < err.length; z++) {\n        toast.error(err[z]);\n        event.target.value = null;\n      }\n\n      return true;\n    };\n\n    _this.maxSelectFile = function (event) {\n      var files = event.target.files;\n\n      if (files.length > 1) {\n        var msg = 'Only 1 file can be uploaded at a time';\n        event.target.value = null;\n        toast.warn(msg);\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.checkFileSize = function (event) {\n      var files = event.target.files;\n      var size = 20000000;\n      var err = [];\n\n      for (var x = 0; x < files.length; x++) {\n        if (files[x].size > size) {\n          err[x] = files[x].type + 'is too large, please pick a smaller file\\n';\n        }\n      }\n\n      ;\n\n      for (var z = 0; z < err.length; z++) {\n        toast.error(err[z]);\n        event.target.value = null;\n      }\n\n      return true;\n    };\n\n    _this.onChangeHandler = function (event) {\n      var files = event.target.files;\n      var fileObj = event.target.files[0];\n      var fileName = fileObj.name;\n\n      if (_this.maxSelectFile(event) && _this.checkMimeType(event) && _this.checkFileSize(event)) {\n        _this.setState({\n          selectedFile: files,\n          loaded: 0,\n          filename: fileName\n        });\n\n        _this.renderFile(files[0]);\n      }\n    };\n\n    _this.onClickHandler = function () {\n      var data = new FormData();\n\n      for (var x = 0; x < _this.state.selectedFile.length; x++) {\n        data.append('file', _this.state.selectedFile[x]);\n      }\n\n      axios.post(\"http://localhost:8888/upload\", data, {\n        onUploadProgress: function onUploadProgress(ProgressEvent) {\n          _this.setState({\n            loaded: ProgressEvent.loaded / ProgressEvent.total * 100\n          });\n        }\n      }).then(function (res) {\n        toast.success('upload success');\n      }).catch(function (err) {\n        toast.error('upload fail');\n      });\n      axios.get(\"http://localhost:8888/upload\").then(function (res) {\n        console.log(\"yes\");\n      });\n    };\n\n    _this.handleChange = function (event) {\n      var value = event.target.value;\n      var name = event.target.name;\n      var formData = _this.state.formData;\n      formData[name] = value;\n\n      _this.setState({\n        formData: formData\n      });\n    };\n\n    _this.state = {\n      filename: null,\n      dataLoaded: false,\n      rows: null,\n      cols: null,\n      selectedFile: null,\n      loaded: 0,\n      isLoading: false,\n      apiResponse: [],\n      formData: {\n        numberOfSamples: '100',\n        fileFormat: 'xlsx',\n        primaryKey: '',\n        piiColumn: '',\n        constraints: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var formData = this.state.formData;\n      var options = {\n        count: 50,\n        page: 0,\n        filter: true,\n        filterType: 'dropdown',\n        responsive: 'vertical',\n        tableBodyHeight: '500px',\n        pagination: false,\n        print: false\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Jumbotron, {\n        className: \"jumbotron-background\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Form.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        as: Col,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 19\n        }\n      }, \"Number of Samples\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        name: \"numberOfSamples\",\n        value: formData.numberOfSamples,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        as: Col,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 19\n        }\n      }, \"File Format\"), /*#__PURE__*/React.createElement(Form.Control, {\n        as: \"select\",\n        value: formData.fileFormat,\n        name: \"fileFormat\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 19\n        }\n      }, \"xlsx\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 19\n        }\n      }, \"csv\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 19\n        }\n      }, \"xls\")))), /*#__PURE__*/React.createElement(Form.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        as: Col,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 19\n        }\n      }, \"Primary Key\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        name: \"primaryKey\",\n        value: formData.primaryKey,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        as: Col,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 19\n        }\n      }, \"PII Column\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        name: \"piiColumn\",\n        value: formData.piiColumn,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        as: Col,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 19\n        }\n      }, \"Constraints\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"text\",\n        name: \"Constraints\",\n        value: formData.constraints,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 17\n        }\n      }))))))), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"row\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"offset-md-3 col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group files\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        for: \"file-upload\",\n        class: \"custom-file-upload\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        class: \"fa fa-cloud-upload\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 19\n        }\n      }), \" Choose a File...\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        id: \"file-upload\",\n        class: \"form-control\",\n        style: {\n          display: 'none'\n        },\n        multiple: true,\n        onChange: this.onChangeHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ToastContainer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Progress, {\n        max: \"100\",\n        color: \"success\",\n        value: this.state.loaded,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }\n      }, Math.round(this.state.loaded, 2), \"%\")), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-success btn-block\",\n        onClick: this.onClickHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }\n      }, \"Upload\")))), /*#__PURE__*/React.createElement(Box, {\n        width: 300,\n        m: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 9\n        }\n      }), this.state.dataLoaded && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        body: true,\n        outline: true,\n        color: \"secondary\",\n        className: \"restrict-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(MUIDataTable, {\n        title: this.state.filename,\n        columns: this.state.rows[0],\n        data: this.state.rows.slice(1, -1),\n        options: options,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }\n      }))))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/architgupta923/data-digital-twin/ui/src/App.js"],"names":["React","Component","axios","Progress","ToastContainer","toast","Form","ExcelRenderer","Jumbotron","Col","Container","Card","Box","MUIDataTable","App","props","componentDidMount","callAPI","get","then","response","data","setState","posts","console","log","catch","alert","renderFile","fileObj","err","resp","dataLoaded","cols","rows","checkMimeType","event","files","target","types","x","length","every","type","z","error","value","maxSelectFile","msg","warn","checkFileSize","size","onChangeHandler","fileName","name","selectedFile","loaded","filename","onClickHandler","FormData","state","append","post","onUploadProgress","ProgressEvent","total","res","success","handleChange","formData","isLoading","apiResponse","numberOfSamples","fileFormat","primaryKey","piiColumn","constraints","options","count","page","filter","filterType","responsive","tableBodyHeight","pagination","print","display","Math","round","slice"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { Progress } from 'reactstrap';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\nimport Form from 'react-bootstrap/Form';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { ExcelRenderer } from 'react-excel-renderer';\nimport { Jumbotron, Col, Container, Card } from 'reactstrap';\nimport { Box } from '@material-ui/core';\nimport MUIDataTable from 'mui-datatables';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state={\n      filename: null,\n      dataLoaded: false,\n      rows: null,\n      cols: null,\n      selectedFile: null,\n      loaded: 0,\n      isLoading: false,\n      apiResponse: [],\n      formData: {\n        numberOfSamples: '100',\n        fileFormat: 'xlsx',\n        primaryKey: '',\n        piiColumn: '',\n        constraints: ''\n    },\n  }\n  }\n  \n  componentDidMount = () => {\n    this.callAPI();\n    };\n  \n  callAPI = () => {\n  axios.get('/')\n  .then((response) => { \n    const data = response.data;\n    this.setState({posts: data});\n    console.log('Data has been received!');\n  })\n  .catch(() => {\n    alert('Error retrieving data!');\n  });\n}\n\n  renderFile = (fileObj) => {\n      ExcelRenderer(fileObj, (err, resp) => {\n        if(err){\n          console.log(err);            \n        }\n        else{\n          this.setState({\n            dataLoaded: true,\n            cols: resp.cols,\n            rows: resp.rows\n          });\n        }\n      }); \n  }\n\n  checkMimeType = (event) => {\n    let files = event.target.files\n    let err = []\n    const types = ['application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/vnd.ms-excel', 'text/csv']\n    for (var x=0; x<files.length; x++) {\n        if(types.every(type => files[x].type !== type)) {  \n         err[x] = files[x].type+' is not a supported format\\n';\n       }\n     };\n     for (var z=0; z<err.length; z++) {\n        toast.error(err[z])\n        event.target.value = null\n    }\n   return true;\n  }\n  \n  maxSelectFile = (event) => {\n    let files = event.target.files\n        if (files.length > 1) { \n           const msg = 'Only 1 file can be uploaded at a time'\n           event.target.value = null\n           toast.warn(msg)\n           return false;\n      }\n    return true;\n  }\n  \n  checkFileSize = (event) => {\n    let files = event.target.files\n    let size = 20000000\n    let err = []; \n    for (var x=0; x<files.length; x++) {\n    if (files[x].size > size) {\n    err[x] = files[x].type+'is too large, please pick a smaller file\\n';\n }\n};\n\n  for (var z=0; z<err.length; z++) {\n    toast.error(err[z])\n    event.target.value = null\n   }\nreturn true;\n}\n\n  onChangeHandler = (event) => {\n    var files = event.target.files\n    let fileObj = event.target.files[0];\n    let fileName = fileObj.name;\n    if(this.maxSelectFile(event) && this.checkMimeType(event) && this.checkFileSize(event)) {\n      this.setState({\n      selectedFile: files,\n      loaded:0,\n      filename: fileName\n    });\n    this.renderFile(files[0])\n  }\n}\n\n  onClickHandler = () => {\n    const data = new FormData() \n    for(var x = 0; x<this.state.selectedFile.length; x++) {\n      data.append('file', this.state.selectedFile[x])\n    }\n    axios.post(\"http://localhost:8888/upload\", data, {\n      onUploadProgress: ProgressEvent => {\n        this.setState({\n          loaded: (ProgressEvent.loaded / ProgressEvent.total*100),\n        })\n      },\n    }).then(res => {\n        toast.success('upload success')\n      })\n      .catch(err => {\n        toast.error('upload fail')\n      })\n      axios.get(\"http://localhost:8888/upload\").then(res => {console.log(\"yes\")})\n    }\n\n  handleChange = (event) => {\n    const value = event.target.value;\n    const name = event.target.name;\n    var formData = this.state.formData;\n    formData[name] = value;\n    this.setState({\n      formData\n    });\n  }\n\n  render() {\n  const formData = this.state.formData;\n  const options = {\n    count: 50,\n    page: 0,\n    filter: true,\n    filterType: 'dropdown',\n    responsive: 'vertical',\n    tableBodyHeight:'500px',\n    pagination: false,\n    print: false\n    };\n\n    return (\n      <div>\n        <div>\n          <Jumbotron className=\"jumbotron-background\">\n          <div className=\"content\">\n            <Form>\n              <Form.Row>\n                <Form.Group as={Col}>\n                  <Form.Label>Number of Samples</Form.Label>\n                <Form.Control \n                  type=\"text\"\n                  name=\"numberOfSamples\"\n                  value={formData.numberOfSamples}\n                  onChange={this.handleChange}/>\n                </Form.Group>\n                <Form.Group as={Col}>\n                  <Form.Label>File Format</Form.Label>\n                <Form.Control \n                  as=\"select\"\n                  value={formData.fileFormat}\n                  name=\"fileFormat\"\n                  onChange={this.handleChange}>\n                  <option>xlsx</option>\n                  <option>csv</option>\n                  <option>xls</option>\n                </Form.Control>\n                </Form.Group>\n              </Form.Row>\n              <Form.Row>\n                <Form.Group as={Col}>\n                  <Form.Label>Primary Key</Form.Label>\n                <Form.Control \n                  type=\"text\"\n                  name=\"primaryKey\"\n                  value={formData.primaryKey}\n                  onChange={this.handleChange}/>\n                </Form.Group>\n                <Form.Group as={Col}>\n                  <Form.Label>PII Column</Form.Label>\n                <Form.Control \n                  type=\"text\"\n                  name=\"piiColumn\"\n                  value={formData.piiColumn}\n                  onChange={this.handleChange}/>\n                </Form.Group>\n                <Form.Group as={Col}>\n                  <Form.Label>Constraints</Form.Label>\n                <Form.Control \n                  type=\"text\"\n                  name=\"Constraints\"\n                  value={formData.constraints}\n                  onChange={this.handleChange}/>\n                </Form.Group>\n              </Form.Row>\n            </Form>\n          </div>\n          </Jumbotron>\n        </div>\n        <div>\n        <Container>\n        <form>\n          <row>\n            <div class=\"offset-md-3 col-md-6\">\n              <div class=\"form-group files\">\n                <label for=\"file-upload\" class=\"custom-file-upload\">\n                  <i class=\"fa fa-cloud-upload\"></i> Choose a File...\n                </label>\n                <input type=\"file\" name=\"file\" id=\"file-upload\" class=\"form-control\" style={{display:'none'}} multiple onChange={this.onChangeHandler}/>\n              </div>\n            <div class=\"form-group\">\n            <ToastContainer/>\n            <Progress max=\"100\" color=\"success\" value={this.state.loaded}>{Math.round(this.state.loaded, 2)}%</Progress>\n            </div> \n            <button type=\"button\" class=\"btn btn-success btn-block\" onClick={this.onClickHandler}>Upload</button>\n\t    </div>                                              \n          </row>   \n        </form>\n        <Box width={300} m={5}>\n        </Box>\n        {this.state.dataLoaded && \n        <div>\n          <Card body outline color=\"secondary\" className=\"restrict-card\">\n            <MUIDataTable title={this.state.filename} columns={this.state.rows[0]} data={this.state.rows.slice(1, -1)} options={options}/>\n          </Card>  \n        </div>}\n        </Container>\n        </div>\n        </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}